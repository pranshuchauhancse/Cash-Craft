import React,{useEffect,useState} from 'react'; import { API } from '../api';
export default function Budgets(){ const [items,setItems]=useState([]); const [month,setMonth]=useState(new Date().toISOString().slice(0,7)); const [limit,setLimit]=useState('');
  useEffect(()=>load(),[]); async function load(){ const { data } = await API.get('/budgets'); setItems(data) }
  async function save(e){ e.preventDefault(); await API.post('/budgets',{month,limit:Number(limit)}); setLimit(''); load(); }
  async function summ(m){ const { data } = await API.get(`/budgets/${m}/summary`); alert(`Month ${m}\nLimit: ₹${data.limit}\nSpent: ₹${data.spent}\nRemaining: ₹${data.remaining}`) }
  return (<div><div className="card"><h3>Set monthly budget</h3><form onSubmit={save} style={{display:'flex',gap:8,alignItems:'center'}}><input className="input" type="month" value={month} onChange={e=>setMonth(e.target.value)} /><input className="input" placeholder="Limit" value={limit} onChange={e=>setLimit(e.target.value)} /><button className="btn">Save</button></form></div><div className="card table" style={{marginTop:12}}><h3>Saved budgets</h3><table><thead><tr><th>Month</th><th>Limit</th><th>Action</th></tr></thead><tbody>{items.map(i=>(<tr key={i._id}><td>{i.month}</td><td>₹{i.limit}</td><td><button className="btn" onClick={()=>summ(i.month)}>Check</button></td></tr>))}</tbody></table></div></div>) }
