import React,{useEffect,useState} from 'react'; import { API } from '../api';
export default function Expenses(){ const [list,setList]=useState([]); const [form,setForm]=useState({amount:'',category:'',kind:'expense',note:'',date:''});
  useEffect(()=>load(),[]); async function load(){ const { data } = await API.get('/expenses'); setList(data) }
  async function add(e){ e.preventDefault(); await API.post('/expenses',{...form, amount:Number(form.amount)}); setForm({amount:'',category:'',kind:'expense',note:'',date:''}); load(); }
  return (<div><div className="card" style={{marginBottom:12}}><h3>Add transaction</h3><form onSubmit={add} style={{display:'grid',gap:8}}><input className="input" placeholder="Amount" value={form.amount} onChange={e=>setForm(f=>({...f, amount:e.target.value}))} /><input className="input" placeholder="Category" value={form.category} onChange={e=>setForm(f=>({...f, category:e.target.value}))} /><select className="input" value={form.kind} onChange={e=>setForm(f=>({...f, kind:e.target.value}))}><option value="expense">Expense</option><option value="income">Income</option></select><input className="input" placeholder="Note" value={form.note} onChange={e=>setForm(f=>({...f, note:e.target.value}))} /><button className="btn">Add</button></form></div><div className="card table"><h3>Transactions</h3><table><thead><tr><th>Date</th><th>Type</th><th>Category</th><th>Amount</th></tr></thead><tbody>{list.map(it=>(<tr key={it._id}><td>{new Date(it.date).toLocaleDateString()}</td><td className="badge">{it.kind}</td><td>{it.category}</td><td>â‚¹{it.amount}</td></tr>))}</tbody></table></div></div>) }
